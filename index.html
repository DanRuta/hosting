<style>
    body {
        display: flex;
        justify-content: center;
        background-color: black;
    }
    #circle {
        height: 50vw;
        width: 50vw;
        background-color: #00ff00;
        border-radius: 50%;
        box-shadow: 0 0 1000px 100px #00ff00;
    }
    #debug {
        position: absolute;
        font-size: 67px;
        color: blue;
    }
</style>
<script>
"use strict"
window.addEventListener("load", () => {

    // Tap and hold
    let tapHoldTimer

    const onHold = () => {
        console.log("tap and hold")
    }

    // Double tap
    let doubleTapTimeout
    let lastTap = 0

    // Swipe
    let touchstartX = 0
    let touchstartY = 0
    let touchendX = 0
    let touchendY = 0

    // window.addEventListener("touchstart", ({screenX, screenY}) => {
    window.addEventListener("touchstart", e => {

        e.preventDefault()

        tapHoldTimer = setTimeout(onHold, 500)


        // touchstartX = e.screenX
        // touchstartY = e.screenY
        touchstartX = e.changedTouches[0].screenX
        touchstartY = e.changedTouches[0].screenY
    })

    window.addEventListener("touchmove", e => {
        if (tapHoldTimer) {
            clearTimeout(tapHoldTimer)
        }
    })

    // window.addEventListener("touchend", ({screenX, screenY}) => {
    window.addEventListener("touchend", e => {

        e.preventDefault()

        if (tapHoldTimer) {
            clearTimeout(tapHoldTimer)
        }

        const currTime = new Date().getTime()
        const tapLength = currTime - lastTap

        if (doubleTapTimeout) {
            clearTimeout(doubleTapTimeout)
        }

        if (tapLength < 500 && tapLength > 0) {
            console.log("double tap")
        } else {
            console.log("single tap")
            doubleTapTimeout = setTimeout(() => clearTimeout(doubleTapTimeout), 500)
        }


        // touchendX = e.screenX
        // touchendY = e.screenY
        touchendX = e.changedTouches[0].screenX
        touchendY = e.changedTouches[0].screenY

        if (touchendX < (touchstartX-10)) {
            console.log("swiped left")
            debug.innerHTML = "swiped left"
        }

        if (touchendX > (touchstartX+10)) {
            console.log("swiped right")
            debug.innerHTML = "swiped right"
        }

        if (touchendY < (touchstartY-10)) {
            console.log("swiped up")
            debug.innerHTML = "swiped up"
        }

        if (touchendY > (touchstartY+10)) {
            console.log("swiped down")
            debug.innerHTML = "swiped down"
        }

    })

    // Pinch
    let previousDiff
    const events = []

    const poninterDown = e => {

        e.preventDefault()

        events.push(e)
    }

    const pointerMove = e => {

        e.preventDefault()

        // Update the pointer event
        for (let pi=0; pi<events.length; pi++) {
            if (events[pi].pointerId==e.pointerId) {
                events[pi] = e
                break
            }
        }

        // Calculate new diff
        if (events.length == 2) {

            const diffX = Math.abs(events[0].clientX - events[1].clientX)
            const diffY = Math.abs(events[0].clientY - events[1].clientY)
            const diff = Math.max(diffX, diffY)

            if (previousDiff > 0) {
                if (diff > previousDiff) {
                    console.log("pinch out")
                    debug.innerHTML = "pinch out"
                }

                if (diff < previousDiff) {
                    console.log("pinch in")
                    debug.innerHTML = "pinch in"
                }
            }

            previousDiff = diff
        }

    }

    const pointerUp = e => {

    }

    window.addEventListener("pointerdown", poninterDown)
    window.addEventListener("pointermove", pointerMove)
    window.addEventListener("pointerup", pointerUp)
    window.addEventListener("pointercancel", pointerUp)
    window.addEventListener("pointerout", pointerUp)
    window.addEventListener("pointerleave", pointerUp)




    circle.addEventListener("click", () => {
        document.fullscreenEnabled && circle.requestFullScreen() ||
        document.webkitFullscreenEnabled && circle.webkitRequestFullScreen() ||
        document.mozFullScreenEnabled && circle.mozRequestFullScreen() ||
        document.msFullScreenEnabled && circle.msRequestFullScreen()
    })
})

</script>
<div id="circle"></div>
<div id="debug"></div>