
<style>
    body {
        display: flex;
        justify-content: center;
        background-color: black;
        margin: 0;
        touch-action: none;
    }
    #circle {
        height: 50vw;
        width: 50vw;
        pointer-events: none;
        background-color: #00ff00;
        border-radius: 50%;
        box-shadow: 0 0 1000px 100px #00ff00;
    }
    #debug {
        position: absolute;
        pointer-events: none;
        font-size: 67px;
        color: blue;
    }
    #eventArea {
        height: 100vh;
        width: 100vw;
        position: absolute;
        /*background-color: red;*/
    }
</style>
<script>
"use strict"
window.addEventListener("load", () => {

    // Tap and hold
    let tapHoldTimer

    const onHold = () => {
        console.log("tap and hold")
    }

    // Double tap
    let doubleTapTimeout
    let lastTap = 0

    // Swipe
    let touchstartX = 0
    let touchstartY = 0
    let touchendX = 0
    let touchendY = 0

    const touchStartEvent = e => {
        e.preventDefault()

        tapHoldTimer = setTimeout(onHold, 500)


        // touchstartX = e.screenX
        // touchstartY = e.screenY
        touchstartX = e.changedTouches[0].screenX
        touchstartY = e.changedTouches[0].screenY
    }

    const touchMoveEvent = e => {
        if (tapHoldTimer) {
            clearTimeout(tapHoldTimer)
        }
    }

    const touchEndEvent = e => {
        e.preventDefault()

        if (tapHoldTimer) {
            clearTimeout(tapHoldTimer)
        }

        const currTime = new Date().getTime()
        const tapLength = currTime - lastTap

        if (doubleTapTimeout) {
            clearTimeout(doubleTapTimeout)
        }

        if (tapLength < 500 && tapLength > 0) {
            console.log("double tap")
        } else {
            console.log("single tap")
            doubleTapTimeout = setTimeout(() => clearTimeout(doubleTapTimeout), 500)
        }


        // touchendX = e.screenX
        // touchendY = e.screenY
        touchendX = e.changedTouches[0].screenX
        touchendY = e.changedTouches[0].screenY

        if (touchendX < (touchstartX-10)) {
            console.log("swiped left")
            debug.innerHTML = "swiped left"
        }

        if (touchendX > (touchstartX+10)) {
            console.log("swiped right")
            debug.innerHTML = "swiped right"
        }

        if (touchendY < (touchstartY-10)) {
            console.log("swiped up")
            debug.innerHTML = "swiped up"
        }

        if (touchendY > (touchstartY+10)) {
            console.log("swiped down")
            debug.innerHTML = "swiped down"
        }
    }

    // eventArea.addEventListener("touchstart", touchStartEvent)
    // eventArea.addEventListener("mousedown", touchStartEvent)

    // eventArea.addEventListener("touchmove", touchMoveEvent)
    // eventArea.addEventListener("mousemovemove", touchMoveEvent)

    // eventArea.addEventListener("touchend", touchEndEvent)
    // eventArea.addEventListener("mouseup", touchEndEvent)

    // Pinch
    let previousDiff = -1
    const events = []

    const poninterDown = e => {

        // e.preventDefault()
        debug.innerHTML = "poninterDown"


        events.push(e)
    }

    const pointerMove = e => {

        // e.preventDefault()

        // Update the pointer event
        for (let pi=0; pi<events.length; pi++) {
            if (events[pi].pointerId == e.pointerId) {
                events[pi] = e
                break
            }
        }

        // Calculate new diff
        if (events.length == 2) {

            const diffX = Math.abs(events[0].clientX - events[1].clientX)
            // const diffY = Math.abs(events[0].clientY - events[1].clientY)
            // const diff = Math.max(diffX, diffY)
            const diff = diffX

            if (previousDiff > 0) {
                if (diff > previousDiff) {
                    console.log("pinch out")
                    debug.innerHTML = "pinch out"
                }

                if (diff < previousDiff) {
                    console.log("pinch in")
                    debug.innerHTML = "pinch in"
                }
            } else {
                console.log("nope")
                debug.innerHTML = "__"
            }

            previousDiff = diff
        }

    }

    const pointerUp = e => {

        debug.innerHTML = "pointerUp"


        // Remove the event
        for (let pi=0; pi<events.length; pi++) {
            if (events[pi].pointerId==e.pointerId) {
                events.splice(pi, 1)
                break
            }
        }

        if (events.length < 2) {
            previousDiff = -1
        }

    }

    // eventArea.addEventListener("pointerdown", poninterDown)
    // eventArea.addEventListener("pointermove", pointerMove)
    // eventArea.addEventListener("pointerup", pointerUp)
    // eventArea.addEventListener("pointercancel", pointerUp)
    // eventArea.addEventListener("pointerout", pointerUp)
    // eventArea.addEventListener("pointerleave", pointerUp)

    eventArea.onpointerdown = poninterDown
    eventArea.onpointermove = pointerMove
    eventArea.onpointerup = pointerUp
    eventArea.onpointercancel = pointerUp
    eventArea.onpointerout = pointerUp
    eventArea.onpointerleave = pointerUp




    circle.addEventListener("click", () => {
        document.fullscreenEnabled && circle.requestFullScreen() ||
        document.webkitFullscreenEnabled && circle.webkitRequestFullScreen() ||
        document.mozFullScreenEnabled && circle.mozRequestFullScreen() ||
        document.msFullScreenEnabled && circle.msRequestFullScreen()
    })
})

</script>
    <!-- <div id="circle"></div> -->
    <div id="debug">_2</div>
    <div id="eventArea">

</div>